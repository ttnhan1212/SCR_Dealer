{"version":3,"sources":["webpack:///src/app/pages/visit/paymentcomplete/paymentcomplete.page.html","webpack:///src/app/pages/visit/paymentcomplete/paymentcomplete-routing.module.ts","webpack:///src/app/pages/visit/paymentcomplete/paymentcomplete.module.ts","webpack:///src/app/pages/visit/paymentcomplete/paymentcomplete.page.scss","webpack:///src/app/pages/visit/paymentcomplete/paymentcomplete.page.ts","webpack:///src/app/services/payment.service.ts"],"names":["routes","path","component","PaymentcompletePageRoutingModule","imports","forChild","exports","HttpLoaderFactory","http","PaymentcompletePageModule","forRoot","loader","provide","useFactory","deps","declarations","PaymentcompletePage","dealService","route","router","translate","payment","result","fb","loading","afAuth","now","Date","toISOString","files","finalAmount","other","dateObj","purchaseDate","id","snapshot","paramMap","get","addLangs","setDefaultLang","use","setMinutes","setSeconds","Math","floor","getTime","getUser","authState","subscribe","userId","uid","getDealDetail","completeForm","group","final_amount","requestId","dealerId","console","log","value","showLoader","val","deal","payload","data","hideLoader","event","push","addedFiles","splice","indexOf","content","request_id","dealer_id","purchase_date","status","amount","createResult","updateDeal","finalPrice","updateDealInDealer","final_price","createPayment","navigate","time","myDate","toLocaleString","selector","template","PaymentService","fireStore","collection","add","providedIn"],"mappings":"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","file":"pages-visit-paymentcomplete-paymentcomplete-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t<ion-back-button></ion-back-button>\\n\\t\\t</ion-buttons>\\n\\t\\t<ion-title>\\n\\t\\t\\t<app-logo></app-logo>\\n\\t\\t</ion-title>\\n\\t\\t<ion-button slot=\\\"end\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/','home','deal']\\\">\\n\\t\\t\\t<ion-icon name=\\\"log-out-outline\\\"></ion-icon>\\n\\t\\t</ion-button>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\t<ion-card>\\n\\t\\t<ion-card-content *ngIf=\\\"deal\\\">\\n\\t\\t\\t<form [formGroup]=\\\"completeForm\\\">\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\" style=\\\"font-size: 14pt\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcomplete.visit_result' |\\n\\t\\t\\t\\t\\t\\ttranslate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-input\\n\\t\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"{{'home_visit_result_paymentcomplete.purchase_confirm' | translate}}\\\"\\n\\t\\t\\t\\t\\t\\treadonly\\n\\t\\t\\t\\t\\t></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\" style=\\\"font-size: 14pt\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcomplete.bid_amount' |\\n\\t\\t\\t\\t\\t\\ttranslate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-input\\n\\t\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t\\tdisabled\\n\\t\\t\\t\\t\\t\\treadonly=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"{{deal.participants[1] | number}}\\\"\\n\\t\\t\\t\\t\\t></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\" style=\\\"font-size: 14pt\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcomplete.final_amount' |\\n\\t\\t\\t\\t\\t\\ttranslate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-input\\n\\t\\t\\t\\t\\t\\ttype=\\\"number\\\"\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"{{'home_visit_result_paymentcomplete.input_desire_amount' | translate}}\\\"\\n\\t\\t\\t\\t\\t\\t[formControl]=\\\"finalAmount\\\"\\n\\t\\t\\t\\t\\t></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<br />\\n\\t\\t\\t\\t<div class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ngx-dropzone (change)=\\\"onSelect($event)\\\">\\n\\t\\t\\t\\t\\t\\t<ngx-dropzone-label\\n\\t\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcomplete.upload_instruction' |\\n\\t\\t\\t\\t\\t\\t\\ttranslate}}</ngx-dropzone-label\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<ngx-dropzone-image-preview\\n\\t\\t\\t\\t\\t\\t\\tngProjectAs=\\\"ngx-dropzone-preview\\\"\\n\\t\\t\\t\\t\\t\\t\\t*ngFor=\\\"let f of files\\\"\\n\\t\\t\\t\\t\\t\\t\\t[file]=\\\"f\\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t</ngx-dropzone-image-preview>\\n\\t\\t\\t\\t\\t</ngx-dropzone>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\" style=\\\"font-size: 14pt\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcomplete.other' |\\n\\t\\t\\t\\t\\t\\ttranslate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-textarea\\n\\t\\t\\t\\t\\t\\trows=\\\"5\\\"\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"{{'home_visit_result_paymentcomplete.write_notes_hate' | translate}}\\\"\\n\\t\\t\\t\\t\\t\\t[formControl]=\\\"other\\\"\\n\\t\\t\\t\\t\\t></ion-textarea>\\n\\t\\t\\t\\t</ion-item>\\n\\n\\t\\t\\t\\t<ion-button expand=\\\"block\\\" color=\\\"tertiary\\\" (click)=\\\"completeRequest()\\\"\\n\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcomplete.confirm' |\\n\\t\\t\\t\\t\\ttranslate}}</ion-button\\n\\t\\t\\t\\t>\\n\\t\\t\\t</form>\\n\\t\\t</ion-card-content>\\n\\t</ion-card>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PaymentcompletePage } from './paymentcomplete.page';\n\nconst routes: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: PaymentcompletePage,\n\t},\n];\n\n@NgModule({\n\timports: [RouterModule.forChild(routes)],\n\texports: [RouterModule],\n})\nexport class PaymentcompletePageRoutingModule {}\n","import { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { NgxDropzoneModule } from 'ngx-dropzone';\nimport { ComponentsModule } from './../../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PaymentcompletePageRoutingModule } from './paymentcomplete-routing.module';\n\nimport { PaymentcompletePage } from './paymentcomplete.page';\n\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\nexport function HttpLoaderFactory(http: HttpClient) {\n\treturn new TranslateHttpLoader(http);\n}\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tIonicModule,\n\t\tPaymentcompletePageRoutingModule,\n\t\tComponentsModule,\n\t\tNgxDropzoneModule,\n\t\tTranslateModule.forRoot({\n\t\t\tloader: {\n\t\t\t\tprovide: TranslateLoader,\n\t\t\t\tuseFactory: HttpLoaderFactory,\n\t\t\t\tdeps: [HttpClient],\n\t\t\t},\n\t\t}),\n\t\tHttpClientModule,\n\t\tMatFormFieldModule,\n\t\tMatInputModule,\n\t\tReactiveFormsModule,\n\t],\n\tdeclarations: [PaymentcompletePage],\n})\nexport class PaymentcompletePageModule {}\n","export default \"ion-title {\\n  padding: 0 !important;\\n}\\n\\ntextarea {\\n  height: 100px !important;\\n}\\n\\n.breadcrumb-item a {\\n  color: #3f80ff;\\n}\\n\\n.page-header {\\n  margin-top: 0.7rem;\\n}\\n\\n.mylabel {\\n  font-family: \\\"Noto Sans KR\\\";\\n  font-size: 14px;\\n}\\n\\n.mytimepicker {\\n  font-size: 14px;\\n}\\n\\nion-item {\\n  --inner-padding-end: 0px;\\n  --padding-start: 0px;\\n}\\n\\n* {\\n  font-family: \\\"Noto Sans KR\\\", sans-serif !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdmlzaXQvcGF5bWVudGNvbXBsZXRlL3BheW1lbnRjb21wbGV0ZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxxQkFBQTtBQUNEOztBQUVBO0VBQ0ksd0JBQUE7QUFDSjs7QUFFQTtFQUNDLGNBQUE7QUFDRDs7QUFFQTtFQUNDLGtCQUFBO0FBQ0Q7O0FBRUE7RUFDQywyQkFBQTtFQUNBLGVBQUE7QUFDRDs7QUFFQTtFQUNDLGVBQUE7QUFDRDs7QUFFQTtFQUNDLHdCQUFBO0VBQ0Esb0JBQUE7QUFDRDs7QUFFQTtFQUNDLGtEQUFBO0FBQ0QiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy92aXNpdC9wYXltZW50Y29tcGxldGUvcGF5bWVudGNvbXBsZXRlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi10aXRsZSB7XG5cdHBhZGRpbmc6IDAgIWltcG9ydGFudDtcbn1cblxudGV4dGFyZWEge1xuICAgIGhlaWdodDogMTAwcHggIWltcG9ydGFudDtcbn1cblxuLmJyZWFkY3J1bWItaXRlbSBhIHtcblx0Y29sb3I6ICMzZjgwZmY7XG59XG5cbi5wYWdlLWhlYWRlciB7XG5cdG1hcmdpbi10b3A6IDAuN3JlbTtcbn1cblxuLm15bGFiZWwge1xuXHRmb250LWZhbWlseTogJ05vdG8gU2FucyBLUic7XG5cdGZvbnQtc2l6ZTogMTRweDtcbn1cblxuLm15dGltZXBpY2tlciB7XG5cdGZvbnQtc2l6ZTogMTRweDtcbn1cblxuaW9uLWl0ZW0ge1xuXHQtLWlubmVyLXBhZGRpbmctZW5kOiAwcHg7XG5cdC0tcGFkZGluZy1zdGFydDogMHB4O1xufVxuXG4qIHtcblx0Zm9udC1mYW1pbHk6ICdOb3RvIFNhbnMgS1InLCBzYW5zLXNlcmlmICFpbXBvcnRhbnQ7XG59XG5cbiJdfQ== */\";","import { AngularFireAuth } from '@angular/fire/auth';\nimport { LoaderService } from './../../../services/loader.service';\nimport { PaymentService } from './../../../services/payment.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DealsService } from './../../../services/deals.service';\nimport { Component, OnInit } from '@angular/core';\nimport { ResultService } from 'src/app/services/result.service';\nimport {\n\tFormBuilder,\n\tFormControl,\n\tFormGroup,\n\tValidators,\n} from '@angular/forms';\n\n@Component({\n\tselector: 'app-paymentcomplete',\n\ttemplateUrl: './paymentcomplete.page.html',\n\tstyleUrls: ['./paymentcomplete.page.scss'],\n})\nexport class PaymentcompletePage implements OnInit {\n\tid: string;\n\tuserId: string;\n\n\tnow: string = new Date().toISOString();\n\tselectDate: Date;\n\tfiles: File[] = [];\n\n\tdeal: any;\n\n\tcompleteForm: FormGroup;\n\tfinalAmount = new FormControl(null);\n\tother = new FormControl('');\n\n\tdateObj = new Date();\n\tpurchaseDate = null;\n\n\tconstructor(\n\t\tpublic dealService: DealsService,\n\t\tpublic route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate translate: TranslateService,\n\t\tprivate payment: PaymentService,\n\t\tprivate result: ResultService,\n\t\tprivate fb: FormBuilder,\n\t\tprivate loading: LoaderService,\n\t\tprivate afAuth: AngularFireAuth,\n\t) {\n\t\tthis.id = this.route.snapshot.paramMap.get('id'); //get id parameter\n\n\t\tthis.translate.addLangs(['en', 'kr']);\n\n\t\t// this language will be used as a fallback when a translation isn't found in the current language\n\t\tthis.translate.setDefaultLang('kr');\n\n\t\t// the lang to use, if the lang isn't available, it will use the current loader to get them\n\t\tthis.translate.use('kr');\n\n\t\tthis.dateObj.setMinutes(0);\n\t\tthis.dateObj.setSeconds(0);\n\t\tthis.purchaseDate = Math.floor(this.dateObj.getTime() / 1000.0);\n\t}\n\tngOnInit() {\n\t\tthis.getUser();\n\t}\n\n\tasync getUser() {\n\t\tawait this.afAuth.authState.subscribe((authState) => {\n\t\t\tif (authState) {\n\t\t\t\tthis.userId = authState.uid;\n\t\t\t\tthis.getDealDetail();\n\t\t\t\tthis.completeForm = this.fb.group({\n\t\t\t\t\tresult: 'Purchase Confirm',\n\t\t\t\t\tfinal_amount: this.finalAmount,\n\t\t\t\t\tother: this.other,\n\t\t\t\t\trequestId: this.id,\n\t\t\t\t\tdealerId: this.userId,\n\t\t\t\t});\n\t\t\t}\n\t\t\tconsole.log(this.completeForm.value);\n\t\t});\n\t}\n\n\tasync getDealDetail() {\n\t\tawait this.loading.showLoader();\n\t\tawait this.dealService.getDealDetail(this.id).subscribe((val) => {\n\t\t\tthis.deal = val.payload.data();\n\t\t});\n\t\tawait this.loading.hideLoader();\n\t}\n\n\tonSelect(event) {\n\t\tconsole.log(event);\n\t\tthis.files.push(...event.addedFiles);\n\t}\n\n\tonRemove(event) {\n\t\tconsole.log(event);\n\t\tthis.files.splice(this.files.indexOf(event), 1);\n\t}\n\n\tconsole() {\n\t\tconst { final_amount } = this.completeForm.value;\n\t\tconsole.log(final_amount);\n\t\tconsole.log(this.completeForm.value);\n\t}\n\n\tasync completeRequest() {\n\t\tconst { final_amount } = this.completeForm.value;\n\t\tlet content = {\n\t\t\trequest_id: this.id,\n\t\t\tdealer_id: this.userId,\n\t\t\tpurchase_date: this.purchaseDate,\n\t\t\tstatus: 1,\n\t\t\tamount: 50000,\n\t\t};\n\t\tawait this.result.createResult(this.completeForm.value);\n\t\tawait this.dealService.updateDeal(this.id, {\n\t\t\tfinalPrice: final_amount ? final_amount : 0,\n\t\t\tstatus: 7,\n\t\t});\n\t\tawait this.dealService.updateDealInDealer(this.id, {\n\t\t\tfinal_price: final_amount ? final_amount : 0,\n\t\t\tstatus: 'Waiting',\n\t\t});\n\t\tawait this.payment.createPayment(content);\n\t\tawait this.router.navigate(['certificationupload', this.id]);\n\t}\n\n\tlocaleDate(time: number) {\n\t\tconst myDate = new Date(time * 1000);\n\t\treturn myDate.toLocaleString();\n\t}\n}\n","import { AngularFirestore } from '@angular/fire/firestore';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class PaymentService {\n\tconstructor(private fireStore: AngularFirestore) {}\n\n\tcreatePayment(content: any) {\n\t\tthis.fireStore.collection('Payment').add(content);\n\t}\n}\n"]}