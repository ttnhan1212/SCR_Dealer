{"version":3,"sources":["webpack:///src/app/pages/visit/paymentcancel/paymentcancel.page.html","webpack:///src/app/pages/visit/paymentcancel/paymentcancel-routing.module.ts","webpack:///src/app/pages/visit/paymentcancel/paymentcancel.module.ts","webpack:///src/app/pages/visit/paymentcancel/paymentcancel.page.scss","webpack:///src/app/pages/visit/paymentcancel/paymentcancel.page.ts"],"names":["routes","path","component","PaymentcancelPageRoutingModule","imports","forChild","exports","HttpLoaderFactory","http","PaymentcancelPageModule","forRoot","loader","provide","useFactory","deps","declarations","PaymentcancelPage","translate","router","route","fb","result","dealService","loading","afAuth","authState","now","Date","toISOString","date","Math","floor","getTime","files","reason","required","other","id","snapshot","paramMap","get","addLangs","setDefaultLang","use","cancelForm","group","cancelDate","dealerId","userId","requestId","subscribe","uid","showLoader","createResult","value","updateDeal","visitDate","participants","created","status","getParticipantById","val","forEach","part","deleteParticipant","payload","doc","updateDealInDealer","hideLoader","navigate","event","console","log","push","addedFiles","splice","indexOf","time","myDate","toLocaleString","selector","template"],"mappings":"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","file":"pages-visit-paymentcancel-paymentcancel-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t<ion-back-button></ion-back-button>\\n\\t\\t</ion-buttons>\\n\\t\\t<ion-title>\\n\\t\\t\\t<app-logo></app-logo>\\n\\t\\t</ion-title>\\n\\t\\t<ion-button slot=\\\"end\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/','home','deal']\\\">\\n\\t\\t\\t<ion-icon name=\\\"log-out-outline\\\"></ion-icon>\\n\\t\\t</ion-button>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\t<ion-card>\\n\\t\\t<ion-card-content>\\n\\t\\t\\t<form [formGroup]=\\\"cancelForm\\\">\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcancel.visit_result' |\\n\\t\\t\\t\\t\\t\\ttranslate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-input\\n\\t\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"{{'home_visit_result_paymentcancel.visit_result_place_holder' | translate}}\\\"\\n\\t\\t\\t\\t\\t\\treadonly\\n\\t\\t\\t\\t\\t></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcancel.cacel_reason' |\\n\\t\\t\\t\\t\\t\\ttranslate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-textarea rows=\\\"5\\\" [formControl]=\\\"reason\\\"></ion-textarea>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<div class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ngx-dropzone (change)=\\\"onSelect($event)\\\">\\n\\t\\t\\t\\t\\t\\t<ngx-dropzone-label\\n\\t\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcancel.upload_instruction' |\\n\\t\\t\\t\\t\\t\\t\\ttranslate}}</ngx-dropzone-label\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<ngx-dropzone-image-preview\\n\\t\\t\\t\\t\\t\\t\\tngProjectAs=\\\"ngx-dropzone-preview\\\"\\n\\t\\t\\t\\t\\t\\t\\t*ngFor=\\\"let f of files\\\"\\n\\t\\t\\t\\t\\t\\t\\t[file]=\\\"f\\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t</ngx-dropzone-image-preview>\\n\\t\\t\\t\\t\\t</ngx-dropzone>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcancel.other' | translate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-textarea rows=\\\"5\\\" [formControl]=\\\"other\\\"></ion-textarea>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-button expand=\\\"block\\\" color=\\\"tertiary\\\" (click)=\\\"submitCancel()\\\"\\n\\t\\t\\t\\t\\t>{{'home_visit_result_paymentcancel.confirm' | translate}}</ion-button\\n\\t\\t\\t\\t>\\n\\t\\t\\t</form>\\n\\t\\t</ion-card-content>\\n\\t</ion-card>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PaymentcancelPage } from './paymentcancel.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentcancelPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PaymentcancelPageRoutingModule {}\n","import { ComponentsModule } from './../../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PaymentcancelPageRoutingModule } from './paymentcancel-routing.module';\n\nimport { PaymentcancelPage } from './paymentcancel.page';\nimport { NgxDropzoneModule } from 'ngx-dropzone';\n\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\nexport function HttpLoaderFactory(http: HttpClient) {\n\treturn new TranslateHttpLoader(http);\n}\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tIonicModule,\n\t\tPaymentcancelPageRoutingModule,\n\t\tComponentsModule,\n\t\tNgxDropzoneModule,\n\t\tTranslateModule.forRoot({\n\t\t\tloader: {\n\t\t\t\tprovide: TranslateLoader,\n\t\t\t\tuseFactory: HttpLoaderFactory,\n\t\t\t\tdeps: [HttpClient],\n\t\t\t},\n\t\t}),\n\t\tHttpClientModule,\n\t\tReactiveFormsModule,\n\t],\n\tdeclarations: [PaymentcancelPage],\n})\nexport class PaymentcancelPageModule {}\n","export default \"textarea {\\n  height: 100px !important;\\n}\\n\\nion-title {\\n  padding: 0 !important;\\n}\\n\\n.breadcrumb-item a {\\n  color: #3f80ff;\\n}\\n\\n.page-header {\\n  margin-top: 0.7rem;\\n}\\n\\n.mylabel {\\n  font-family: \\\"Noto Sans KR\\\";\\n  font-size: 14px;\\n}\\n\\n.mytimepicker {\\n  font-size: 14px;\\n}\\n\\nion-item {\\n  --inner-padding-end: 0px;\\n  --padding-start: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdmlzaXQvcGF5bWVudGNhbmNlbC9wYXltZW50Y2FuY2VsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNJLHdCQUFBO0FBQUo7O0FBR0E7RUFDQyxxQkFBQTtBQUFEOztBQUdBO0VBQ0MsY0FBQTtBQUFEOztBQUdBO0VBQ0Msa0JBQUE7QUFBRDs7QUFHQTtFQUNDLDJCQUFBO0VBQ0EsZUFBQTtBQUFEOztBQUdBO0VBQ0MsZUFBQTtBQUFEOztBQUdBO0VBQ0Msd0JBQUE7RUFDQSxvQkFBQTtBQUFEIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdmlzaXQvcGF5bWVudGNhbmNlbC9wYXltZW50Y2FuY2VsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxudGV4dGFyZWEge1xuICAgIGhlaWdodDogMTAwcHggIWltcG9ydGFudDtcbn1cblxuaW9uLXRpdGxlIHtcblx0cGFkZGluZzogMCAhaW1wb3J0YW50O1xufVxuXG4uYnJlYWRjcnVtYi1pdGVtIGEge1xuXHRjb2xvcjogIzNmODBmZjtcbn1cblxuLnBhZ2UtaGVhZGVyIHtcblx0bWFyZ2luLXRvcDogMC43cmVtO1xufVxuXG4ubXlsYWJlbCB7XG5cdGZvbnQtZmFtaWx5OiAnTm90byBTYW5zIEtSJztcblx0Zm9udC1zaXplOiAxNHB4O1xufVxuXG4ubXl0aW1lcGlja2VyIHtcblx0Zm9udC1zaXplOiAxNHB4O1xufVxuXG5pb24taXRlbSB7XG5cdC0taW5uZXItcGFkZGluZy1lbmQ6IDBweDtcblx0LS1wYWRkaW5nLXN0YXJ0OiAwcHg7XG59XG5cbiJdfQ== */\";","import { AngularFireAuth } from '@angular/fire/auth';\nimport { LoaderService } from './../../../services/loader.service';\nimport { DealsService } from './../../../services/deals.service';\nimport { ResultService } from './../../../services/result.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Component, OnInit } from '@angular/core';\nimport {\n\tFormGroup,\n\tFormControl,\n\tValidators,\n\tFormBuilder,\n} from '@angular/forms';\n\n@Component({\n\tselector: 'app-paymentcancel',\n\ttemplateUrl: './paymentcancel.page.html',\n\tstyleUrls: ['./paymentcancel.page.scss'],\n})\nexport class PaymentcancelPage implements OnInit {\n\tid: string;\n\tuserId: string;\n\tauthState: any = null;\n\n\tnow: string = new Date().toISOString();\n\tselectDate: Date;\n\n\tdate = Math.floor(new Date().getTime() / 1000.0);\n\n\tfiles: File[] = [];\n\n\tcancelForm: FormGroup;\n\treason = new FormControl('', Validators.required);\n\tother = new FormControl('', Validators.required);\n\n\tconstructor(\n\t\ttranslate: TranslateService,\n\t\tprivate router: Router,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate fb: FormBuilder,\n\t\tprivate result: ResultService,\n\t\tprivate dealService: DealsService,\n\t\tprivate loading: LoaderService,\n\t\tprivate afAuth: AngularFireAuth\n\t) {\n\t\tthis.id = this.route.snapshot.paramMap.get('id'); //get id parameter\n\t\ttranslate.addLangs(['en', 'kr']);\n\n\t\t// this language will be used as a fallback when a translation isn't found in the current language\n\t\ttranslate.setDefaultLang('kr');\n\n\t\t// the lang to use, if the lang isn't available, it will use the current loader to get them\n\t\ttranslate.use('kr');\n\n\t\tthis.cancelForm = this.fb.group({\n\t\t\tresult: 'Cancel',\n\t\t\treason: this.reason,\n\t\t\tother: this.other,\n\t\t\tcancelDate: this.date,\n\t\t\tdealerId: this.userId,\n\t\t\trequestId: this.id,\n\t\t});\n\n\t\tthis.afAuth.authState.subscribe((authState) => {\n\t\t\tthis.authState = authState;\n\t\t\tif (this.authState) {\n\t\t\t\tthis.userId = this.authState.uid;\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnInit() {}\n\n\tasync submitCancel() {\n\t\tthis.loading.showLoader();\n\t\tawait this.result.createResult(this.cancelForm.value);\n\t\tawait this.dealService.updateDeal(this.id, {\n\t\t\tvisitDate: null,\n\t\t\tparticipants: { created: false },\n\t\t\tstatus: 6,\n\t\t});\n\t\tawait this.dealService\n\t\t\t.getParticipantById(this.id, this.userId)\n\t\t\t.subscribe((val) => {\n\t\t\t\tval.forEach((part) => {\n\t\t\t\t\tthis.dealService.deleteParticipant(this.id, part.payload.doc.id);\n\t\t\t\t});\n\t\t\t});\n\t\tawait this.dealService.updateDealInDealer(this.id, { status: 'Cancel' });\n\t\tthis.loading.hideLoader();\n\t\tawait this.router.navigate(['/', 'home', 'deal']);\n\t}\n\n\tonSelect(event) {\n\t\tconsole.log(event);\n\t\tthis.files.push(...event.addedFiles);\n\t}\n\n\tonRemove(event) {\n\t\tconsole.log(event);\n\t\tthis.files.splice(this.files.indexOf(event), 1);\n\t}\n\n\tlocaleDate(time: number) {\n\t\tconst myDate = new Date(time * 1000);\n\t\treturn myDate.toLocaleString();\n\t}\n}\n"]}