{"version":3,"sources":["webpack:///src/app/pages/visit/revisit/revisit.page.html","webpack:///src/app/pages/visit/revisit/revisit-routing.module.ts","webpack:///src/app/pages/visit/revisit/revisit.module.ts","webpack:///src/app/pages/visit/revisit/revisit.page.scss","webpack:///src/app/pages/visit/revisit/revisit.page.ts"],"names":["routes","path","component","RevisitPageRoutingModule","imports","forChild","exports","HttpLoaderFactory","http","RevisitPageModule","forRoot","loader","provide","useFactory","deps","declarations","RevisitPage","translate","result","fb","loading","afAuth","route","router","dealService","now","Date","toISOString","files","reason","other","date","id","snapshot","paramMap","get","addLangs","setDefaultLang","use","revisitForm","group","requestId","event","console","log","push","addedFiles","splice","indexOf","value","time","setMinutes","setSeconds","unix","Math","floor","getTime","patchValue","updateDeal","visitDate","createResult","navigate","myDate","toLocaleString","selector","template"],"mappings":"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","file":"pages-visit-revisit-revisit-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t<ion-back-button></ion-back-button>\\n\\t\\t</ion-buttons>\\n\\t\\t<ion-title class=\\\"smllogo\\\">\\n\\t\\t\\t<app-logo></app-logo>\\n\\t\\t</ion-title>\\n\\t\\t<ion-button slot=\\\"end\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/','home','deal']\\\">\\n\\t\\t\\t<ion-icon name=\\\"log-out-outline\\\"></ion-icon>\\n\\t\\t</ion-button>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\t<ion-card>\\n\\t\\t<ion-card-content>\\n\\t\\t\\t<form [formGroup]=\\\"revisitForm\\\">\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_revisit.visit_result' | translate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-input\\n\\t\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t\\treadonly\\n\\t\\t\\t\\t\\t\\tvalue=\\\"{{'home_visit_result_revisit.visit_result' | translate}}\\\"\\n\\t\\t\\t\\t\\t></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_revisit.revisit_reason' |\\n\\t\\t\\t\\t\\t\\ttranslate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-textarea rows=\\\"5\\\" [formControl]=\\\"reason\\\"></ion-textarea>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<div class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ngx-dropzone (change)=\\\"onSelect($event)\\\">\\n\\t\\t\\t\\t\\t\\t<ngx-dropzone-label\\n\\t\\t\\t\\t\\t\\t\\t>{{'home_visit_result_revisit.upload_instruction' |\\n\\t\\t\\t\\t\\t\\t\\ttranslate}}</ngx-dropzone-label\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<ngx-dropzone-image-preview\\n\\t\\t\\t\\t\\t\\t\\tngProjectAs=\\\"ngx-dropzone-preview\\\"\\n\\t\\t\\t\\t\\t\\t\\t*ngFor=\\\"let f of files\\\"\\n\\t\\t\\t\\t\\t\\t\\t[file]=\\\"f\\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t</ngx-dropzone-image-preview>\\n\\t\\t\\t\\t\\t</ngx-dropzone>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_revisit.revisit_date' | translate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-datetime\\n\\t\\t\\t\\t\\t\\tdisplayFormat=\\\"D MMM YYYY H A\\\"\\n\\t\\t\\t\\t\\t\\t[min]=\\\"now\\\"\\n\\t\\t\\t\\t\\t\\t[formControl]=\\\"date\\\"\\n\\t\\t\\t\\t\\t></ion-datetime>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-item class=\\\"form-group\\\">\\n\\t\\t\\t\\t\\t<ion-label position=\\\"floating\\\"\\n\\t\\t\\t\\t\\t\\t>{{'home_visit_result_revisit.other' | translate}}</ion-label\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<ion-textarea rows=\\\"5\\\" [formControl]=\\\"other\\\"></ion-textarea>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-button expand=\\\"block\\\" color=\\\"tertiary\\\" (click)=\\\"revisitSubmit()\\\"\\n\\t\\t\\t\\t\\t>{{'home_visit_result_revisit.confirm' | translate}}</ion-button\\n\\t\\t\\t\\t>\\n\\t\\t\\t</form>\\n\\t\\t</ion-card-content>\\n\\t</ion-card>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RevisitPage } from './revisit.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RevisitPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RevisitPageRoutingModule {}\n","import { ComponentsModule } from 'src/app/components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RevisitPageRoutingModule } from './revisit-routing.module';\n\nimport { RevisitPage } from './revisit.page';\n\nimport { NgxDropzoneModule } from 'ngx-dropzone';\n\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\nexport function HttpLoaderFactory(http: HttpClient) {\n\treturn new TranslateHttpLoader(http);\n}\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tIonicModule,\n\t\tRevisitPageRoutingModule,\n\t\tComponentsModule,\n\t\tNgxDropzoneModule,\n\t\tTranslateModule.forRoot({\n\t\t\tloader: {\n\t\t\t\tprovide: TranslateLoader,\n\t\t\t\tuseFactory: HttpLoaderFactory,\n\t\t\t\tdeps: [HttpClient],\n\t\t\t},\n\t\t}),\n\t\tHttpClientModule,\n\t\tReactiveFormsModule,\n\t],\n\tdeclarations: [RevisitPage],\n})\nexport class RevisitPageModule {}\n","export default \".smllogo__img {\\n  height: 2.6rem;\\n}\\n\\ntextarea {\\n  height: 100px !important;\\n}\\n\\n.breadcrumb-item a {\\n  color: #3f80ff;\\n}\\n\\n.page-header {\\n  margin-top: 0.7rem;\\n}\\n\\n.mylabel {\\n  font-family: \\\"Noto Sans KR\\\";\\n  font-size: 14px;\\n}\\n\\n.mytimepicker {\\n  font-size: 14px;\\n}\\n\\nion-item {\\n  --inner-padding-end: 0px;\\n  --padding-start: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdmlzaXQvcmV2aXNpdC9yZXZpc2l0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQztFQUNDLGNBQUE7QUFBRjs7QUFJQTtFQUNJLHdCQUFBO0FBREo7O0FBSUE7RUFDQyxjQUFBO0FBREQ7O0FBSUE7RUFDQyxrQkFBQTtBQUREOztBQUlBO0VBQ0MsMkJBQUE7RUFDQSxlQUFBO0FBREQ7O0FBSUE7RUFDQyxlQUFBO0FBREQ7O0FBSUE7RUFDQyx3QkFBQTtFQUNBLG9CQUFBO0FBREQiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy92aXNpdC9yZXZpc2l0L3JldmlzaXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNtbGxvZ28ge1xuXHQmX19pbWcge1xuXHRcdGhlaWdodDogMi42cmVtO1xuXHR9XG59XG5cbnRleHRhcmVhIHtcbiAgICBoZWlnaHQ6IDEwMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5icmVhZGNydW1iLWl0ZW0gYSB7XG5cdGNvbG9yOiAjM2Y4MGZmO1xufVxuXG4ucGFnZS1oZWFkZXIge1xuXHRtYXJnaW4tdG9wOiAwLjdyZW07XG59XG5cbi5teWxhYmVsIHtcblx0Zm9udC1mYW1pbHk6ICdOb3RvIFNhbnMgS1InO1xuXHRmb250LXNpemU6IDE0cHg7XG59XG5cbi5teXRpbWVwaWNrZXIge1xuXHRmb250LXNpemU6IDE0cHg7XG59XG5cbmlvbi1pdGVtIHtcblx0LS1pbm5lci1wYWRkaW5nLWVuZDogMHB4O1xuXHQtLXBhZGRpbmctc3RhcnQ6IDBweDtcbn1cblxuIl19 */\";","import { DealsService } from 'src/app/services/deals.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { LoaderService } from './../../../services/loader.service';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { ResultService } from './../../../services/result.service';\nimport { FormControl, FormGroup, FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'app-revisit',\n\ttemplateUrl: './revisit.page.html',\n\tstyleUrls: ['./revisit.page.scss'],\n})\nexport class RevisitPage implements OnInit {\n\tid: string;\n\tnow: string = new Date().toISOString();\n\tselectDate: Date;\n\n\tfiles: File[] = [];\n\n\trevisitForm: FormGroup;\n\treason = new FormControl('');\n\tother = new FormControl('');\n\tdate = new FormControl('');\n\n\tconstructor(\n\t\ttranslate: TranslateService,\n\t\tprivate result: ResultService,\n\t\tprivate fb: FormBuilder,\n\t\tprivate loading: LoaderService,\n\t\tprivate afAuth: AngularFireAuth,\n\t\tpublic route: ActivatedRoute,\n\t\tpublic router: Router,\n\t\tprivate dealService: DealsService\n\t) {\n\t\tthis.id = this.route.snapshot.paramMap.get('id'); //get id parameter\n\n\t\ttranslate.addLangs(['en', 'kr']);\n\n\t\t// this language will be used as a fallback when a translation isn't found in the current language\n\t\ttranslate.setDefaultLang('kr');\n\n\t\t// the lang to use, if the lang isn't available, it will use the current loader to get them\n\t\ttranslate.use('kr');\n\n\t\tthis.revisitForm = this.fb.group({\n\t\t\tresult: 'Revisit',\n\t\t\treason: this.reason,\n\t\t\tother: this.other,\n\t\t\trequestId: this.id,\n\t\t\tdate: this.date,\n\t\t});\n\t}\n\n\tngOnInit() {}\n\n\tonSelect(event) {\n\t\tconsole.log(event);\n\t\tthis.files.push(...event.addedFiles);\n\t}\n\n\tonRemove(event) {\n\t\tconsole.log(event);\n\t\tthis.files.splice(this.files.indexOf(event), 1);\n\t}\n\n\tasync revisitSubmit() {\n\t\tconst { date } = this.revisitForm.value;\n\t\tlet time = new Date(date);\n\t\ttime.setMinutes(0);\n\t\ttime.setSeconds(0);\n\t\tlet unix = Math.floor(time.getTime() / 1000.0);\n\t\tthis.revisitForm.patchValue({\n\t\t\tdate: unix,\n\t\t});\n\t\tawait this.dealService.updateDeal(this.id, { visitDate: unix });\n\t\tawait this.result.createResult(this.revisitForm.value);\n\t\tawait this.router.navigate(['/', 'home', 'ongoing']);\n\t}\n\n\tlocaleDate(time: number) {\n\t\tconst myDate = new Date(time * 1000);\n\t\treturn myDate.toLocaleString();\n\t}\n}\n"]}