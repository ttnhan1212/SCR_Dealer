{"version":3,"sources":["./src/app/pages/navigation/ongoing/cancel/cancel.page.html","./src/app/pages/navigation/ongoing/cancel/cancel-routing.module.ts","./src/app/pages/navigation/ongoing/cancel/cancel.module.ts","./src/app/pages/navigation/ongoing/cancel/cancel.page.scss","./src/app/pages/navigation/ongoing/cancel/cancel.page.ts"],"names":[],"mappings":"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","file":"cancel-cancel-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]='true'>\\n\\t<ion-toolbar>\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t<ion-back-button></ion-back-button>\\n\\t\\t</ion-buttons>\\n\\t\\t<ion-title>Cancel</ion-title>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n\\t<ion-item class=\\\"mt-10\\\">\\n\\t\\t<ion-label position=\\\"floating\\\">Cancel Reason</ion-label>\\n\\t\\t<ion-textarea [(ngModel)]=\\\"message\\\" class=\\\"cancel-input\\\"></ion-textarea>\\n\\t</ion-item>\\n\\t<ion-button\\n\\t\\tclass=\\\"mt-5\\\"\\n\\t\\texpand=\\\"block\\\"\\n\\t\\tcolor=\\\"primary\\\"\\n\\t\\t(click)=\\\"submitCancel()\\\"\\n\\t>\\n\\t\\tSubmit\\n\\t</ion-button>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CancelPage } from './cancel.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CancelPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CancelPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CancelPageRoutingModule } from './cancel-routing.module';\n\nimport { CancelPage } from './cancel.page';\n\n@NgModule({\n\timports: [CommonModule, FormsModule, IonicModule, CancelPageRoutingModule],\n\tdeclarations: [CancelPage],\n})\nexport class CancelPageModule {}\n","export default \".cancel-input > div > textarea {\\n  min-height: 15rem !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbmF2aWdhdGlvbi9vbmdvaW5nL2NhbmNlbC9jYW5jZWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVFO0VBQ0MsNEJBQUE7QUFESCIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL25hdmlnYXRpb24vb25nb2luZy9jYW5jZWwvY2FuY2VsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jYW5jZWwtaW5wdXQge1xuXHQmID4gZGl2IHtcblx0XHQmID4gdGV4dGFyZWEge1xuXHRcdFx0bWluLWhlaWdodDogMTVyZW0gIWltcG9ydGFudDtcblx0XHR9XG5cdH1cbn1cbiJdfQ== */\";","import { AngularFireAuth } from '@angular/fire/auth';\nimport { NotiService } from './../../../../services/noti.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DealsService } from 'src/app/services/deals.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'app-cancel',\n\ttemplateUrl: './cancel.page.html',\n\tstyleUrls: ['./cancel.page.scss'],\n})\nexport class CancelPage implements OnInit {\n\tid: string;\n\tmessage: string;\n\n\tuserId: string;\n\tauthState: any = null;\n\n\tdate = Math.floor(new Date().getTime() / 1000.0);\n\n\tconstructor(\n\t\tprivate dealService: DealsService,\n\t\tprivate notiService: NotiService,\n\t\tprivate router: Router,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate afAuth: AngularFireAuth\n\t) {\n\t\tthis.id = this.route.snapshot.paramMap.get('id'); //get id parameter\n\t}\n\n\tngOnInit() {\n\t\tthis.getUser();\n\t}\n\n\tasync getUser() {\n\t\tawait this.afAuth.authState.subscribe((authState) => {\n\t\t\tthis.authState = authState;\n\t\t\tif (this.authState) {\n\t\t\t\tthis.userId = this.authState.uid;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync submitCancel() {\n\t\tawait this.dealService.updateDeal(this.id, {\n\t\t\tstatus: 4,\n\t\t\tupdateDate: this.date,\n\t\t});\n\t\tawait this.dealService.createCancelDeal({\n\t\t\tresult: 'Cancel',\n\t\t\treason: this.message,\n\t\t\tcancelDate: this.date,\n\t\t\tdealerId: this.userId,\n\t\t\trequestId: this.id,\n\t\t});\n\t\tawait this.notiService.createNoti({\n\t\t\trequestId: this.id,\n\t\t\tstatus: 4,\n\t\t\tupdateDate: this.userId,\n\t\t});\n\t\tawait this.dealService\n\t\t\t.getParticipantById(this.id, this.userId)\n\t\t\t.subscribe((val) => {\n\t\t\t\tval.forEach((part) => {\n\t\t\t\t\tthis.dealService.deleteParticipant(this.id, part.payload.doc.id);\n\t\t\t\t});\n\t\t\t});\n\t\tawait this.dealService.updateDealInDealer(this.id, { status: 'Cancel' });\n\t\tawait this.dealService.updateDeal(this.id, {\n\t\t\tparticipants: { created: false },\n\t\t});\n\t\tthis.router.navigate(['/', 'home', 'deal']);\n\t}\n}\n"],"sourceRoot":"webpack:///"}