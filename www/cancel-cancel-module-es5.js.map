{"version":3,"sources":["webpack:///src/app/pages/navigation/ongoing/cancel/cancel.page.html","webpack:///src/app/pages/navigation/ongoing/cancel/cancel-routing.module.ts","webpack:///src/app/pages/navigation/ongoing/cancel/cancel.module.ts","webpack:///src/app/pages/navigation/ongoing/cancel/cancel.page.scss","webpack:///src/app/pages/navigation/ongoing/cancel/cancel.page.ts"],"names":["routes","path","component","CancelPageRoutingModule","imports","forChild","exports","CancelPageModule","declarations","CancelPage","dealService","notiService","route","date","Math","floor","Date","getTime","id","snapshot","paramMap","get","localStorage","getItem","userId","JSON","parse","uid","updateDeal","cancelMessage","message","status","updateDate","user","createNoti","requestId","getParticipant","subscribe","val","forEach","part","deleteParticipant","payload","doc","participants","created","selector","template"],"mappings":"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","file":"cancel-cancel-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t<ion-back-button></ion-back-button>\\n\\t\\t</ion-buttons>\\n\\t\\t<ion-title>Cancel</ion-title>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n\\t<ion-item class=\\\"mt-10\\\">\\n\\t\\t<ion-label position=\\\"floating\\\">Cancel Reason</ion-label>\\n\\t\\t<ion-textarea [(ngModel)]=\\\"message\\\" class=\\\"cancel-input\\\"></ion-textarea>\\n\\t</ion-item>\\n\\t<ion-button\\n\\t\\tclass=\\\"mt-5\\\"\\n\\t\\texpand=\\\"block\\\"\\n\\t\\tcolor=\\\"primary\\\"\\n\\t\\t(click)=\\\"submitCancel()\\\"\\n\\t>\\n\\t\\tSubmit\\n\\t</ion-button>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CancelPage } from './cancel.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CancelPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CancelPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CancelPageRoutingModule } from './cancel-routing.module';\n\nimport { CancelPage } from './cancel.page';\n\n@NgModule({\n\timports: [CommonModule, FormsModule, IonicModule, CancelPageRoutingModule],\n\tdeclarations: [CancelPage],\n})\nexport class CancelPageModule {}\n","export default \".cancel-input > div > textarea {\\n  min-height: 15rem !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbmF2aWdhdGlvbi9vbmdvaW5nL2NhbmNlbC9jYW5jZWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVFO0VBQ0MsNEJBQUE7QUFESCIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL25hdmlnYXRpb24vb25nb2luZy9jYW5jZWwvY2FuY2VsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jYW5jZWwtaW5wdXQge1xuXHQmID4gZGl2IHtcblx0XHQmID4gdGV4dGFyZWEge1xuXHRcdFx0bWluLWhlaWdodDogMTVyZW0gIWltcG9ydGFudDtcblx0XHR9XG5cdH1cbn1cbiJdfQ== */\";","import { NotiService } from './../../../../services/noti.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { DealsService } from 'src/app/services/deals.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'app-cancel',\n\ttemplateUrl: './cancel.page.html',\n\tstyleUrls: ['./cancel.page.scss'],\n})\nexport class CancelPage implements OnInit {\n\tid: string;\n\tmessage: string;\n\n\tuserId: string;\n\n\tdate = Math.floor(new Date().getTime() / 1000.0);\n\n\tconstructor(\n\t\tprivate dealService: DealsService,\n\t\tprivate notiService: NotiService,\n\t\tprivate route: ActivatedRoute,\n\t) {\n\t\tthis.id = this.route.snapshot.paramMap.get('id'); //get id parameter\n\t\tif (localStorage.getItem('user')) {\n\t\t\tthis.userId = JSON.parse(localStorage.getItem('user')).uid;\n\t\t}\n\t}\n\n\tngOnInit() {}\n\n\tasync submitCancel() {\n\t\tawait this.dealService.updateDeal(this.id, {\n\t\t\tcancelMessage: this.message,\n\t\t\tstatus: 'Canceled',\n\t\t\tupdateDate: this.date,\n\t\t\tuser: this.userId,\n\t\t});\n\t\tawait this.notiService.createNoti({\n\t\t\trequestId: this.id,\n\t\t\tstatus: 'Canceled',\n\t\t\tupdateDate: this.userId,\n\t\t});\n\t\tawait this.dealService.getParticipant(this.id).subscribe((val) => {\n\t\t\tval.forEach((part) => {\n\t\t\t\tthis.dealService.deleteParticipant(this.id, part.payload.doc.id);\n\t\t\t});\n\t\t});\n\t\tawait this.dealService.updateDeal(this.id, {\n\t\t\tparticipants: { created: false },\n\t\t});\n\t}\n}\n"]}